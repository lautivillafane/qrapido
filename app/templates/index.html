<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>El Rinc√≥n del Sabor</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; background-color: #fff8f0; color: #333; }
    header { background-color: #8b5e3c; color: white; padding: 20px; text-align: center; }
    nav { background-color: #e6ccb2; display: flex; justify-content: center; flex-wrap: wrap; padding: 10px; }
    nav a { margin: 5px 15px; text-decoration: none; color: #5c3d2e; font-weight: bold; }
    section { padding: 40px; max-width: 1000px; margin: auto; }
    h2 { color: #8b5e3c; }
    .hero img { width: 100%; max-height: 400px; object-fit: cover; border-radius: 10px; }
    footer { background: #5c3d2e; color: white; text-align: center; padding: 20px; }

    /* Chatbot */
    .chatbot { 
      font-family: Arial, sans-serif; 
      position: fixed; bottom: 20px; right: 20px; 
      background: #fff; 
      border: 2px solid #8b5e3c; 
      border-radius: 15px; 
      width: 340px; 
      max-height: 450px; 
      display: flex; flex-direction: column; 
      overflow: hidden; 
      box-shadow: 0px 4px 10px rgba(0,0,0,0.2); 
      z-index: 1000;
    }
    .chat-header { background: #8b5e3c; color: white; padding: 10px; text-align: center; font-weight: bold; display: flex; justify-content: space-between; align-items: center; }
    .chat-body { flex: 1; padding: 10px; overflow-y: auto; background: #fdf9f6; display: flex; flex-direction: column; }
    .chat-body p { 
      margin: 8px 0; 
      padding: 10px; 
      border-radius: 12px; 
      max-width: 80%; 
      white-space: pre-wrap; /* Mantiene saltos de l√≠nea */
    }
    .chat-body .user { background: #d9fdd3; align-self: flex-end; }
    .chat-body .bot { background: #f1f0f0; align-self: flex-start; }
    .chat-input { display: flex; }
    .chat-input input { flex: 1; padding: 10px; border: none; border-top: 1px solid #ccc; border-radius: 0 0 0 15px; }
    .chat-input button { background: #8b5e3c; color: white; border: none; padding: 10px; cursor: pointer; border-radius: 0 0 15px 0; }

    /* Responsive */
    @media (max-width: 600px) {
      .chatbot {
        width: 90%;
        right: 5%;
        bottom: 15px;
        max-height: 60vh;
      }
    }
  </style>
</head>
<body>

<header>
  <h1>El Rinc√≥n del Sabor</h1>
  <p>Sabores √∫nicos en el coraz√≥n de CABA</p>
</header>

<nav>
  <a href="#inicio">Inicio</a>
  <a href="#historia">Nuestra Historia</a>
  <a href="#menu">Men√∫ General</a>
  <a href="#sibo">Men√∫ SIBO</a>
  <a href="#contacto">Reservas & Contacto</a>
  <a href="#ubicacion">Ubicaci√≥n</a>
</nav>

<section id="inicio">
  <h2>Bienvenidos</h2>
  <p>Disfrut√° de una experiencia gastron√≥mica √∫nica, combinando los sabores tradicionales con un toque moderno.</p>
  <div class="hero">
    <img src="https://images.unsplash.com/photo-1600891964599-f61ba0e24092" alt="Restaurante">
  </div>
</section>

<section id="historia">
  <h2>Nuestra Historia</h2>
  <p>El Rinc√≥n del Sabor naci√≥ en 2010 como un peque√±o local familiar. Con el tiempo, se convirti√≥ en uno de los lugares m√°s reconocidos de la ciudad por su ambiente c√°lido y su cocina artesanal.</p>
</section>

<section id="menu">
  <h2>Men√∫ General</h2>
  <ul>
    <li>Milanesas con papas fritas</li>
    <li>Pasta casera con salsa fileto</li>
    <li>Pizza a la piedra</li>
  </ul>
</section>

<section id="sibo">
  <h2>Men√∫ SIBO Friendly</h2>
  <ul>
    <li>Pechuga grillada con pur√© de calabaza</li>
    <li>Pescado al vapor con vegetales</li>
    <li>Tofu marinado con arroz integral</li>
  </ul>
</section>

<section id="contacto">
  <h2>Reservas & Contacto</h2>
  <form action="/reservar" method="POST" style="max-width: 400px; margin: 20px 0;">
    <input type="text" name="nombre" placeholder="Nombre" required style="width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #ccc; border-radius: 5px;"><br>
    <input type="tel" name="telefono" placeholder="Tel√©fono" required style="width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #ccc; border-radius: 5px;"><br>
    <input type="number" name="personas" placeholder="Personas" required style="width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #ccc; border-radius: 5px;"><br>
    <input type="date" name="fecha" required style="width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #ccc; border-radius: 5px;"><br>
    <input type="time" name="hora" min="12:00" max="23:00" required style="width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #ccc; border-radius: 5px;"><br>
    <label style="display: flex; align-items: center; margin: 10px 0; font-weight: bold;">
      <input type="checkbox" name="necesita_sibo" value="1" style="margin-right: 10px; transform: scale(1.2);">
      üçΩÔ∏è ¬øAlguna persona tiene SIBO? (Preparamos men√∫ especial)
    </label>
    <button type="submit" style="background: #8b5e3c; color: white; padding: 12px 24px; border: none; border-radius: 5px; cursor: pointer; margin: 10px 0;">Reservar</button>
  </form>
  <a href="/reservas" style="background: #5c3d2e; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px; display: inline-block; margin: 10px 5px;">Ver Reservas</a>
  <a href="/qr-restaurante" style="background: #28a745; color: white; padding: 12px 24px; text-decoration: none; border-radius: 5px; display: inline-block; margin: 10px 5px; font-weight: bold;" download>üì± Descargar QR Men√∫ Digital</a>
  <a href="/menu-digital" style="background: #17a2b8; color: white; padding: 12px 24px; text-decoration: none; border-radius: 5px; display: inline-block; margin: 10px 5px;" target="_blank">üçΩÔ∏è Ver Men√∫ Digital</a>
  <p>Tel√©fono: +54 11 5555 5555</p>
  <p>Email: contacto@rincondelsabor.com</p>
  <p>Horario: Martes a Domingo de 12:00 a 00:00</p>
</section>

<section id="ubicacion">
  <h2>Ubicaci√≥n</h2>
  <p>Av. Corrientes 1234, CABA, Argentina</p>
  <iframe src="https://maps.google.com/maps?q=buenos%20aires&t=&z=13&ie=UTF8&iwloc=&output=embed" 
          width="100%" height="300" style="border:0;" 
          loading="lazy" referrerpolicy="no-referrer-when-downgrade"
          sandbox="allow-scripts allow-same-origin">
  </iframe>
</section>

<footer>
  <p>&copy; 2025 El Rinc√≥n del Sabor - Todos los derechos reservados.</p>
</footer>

<!-- Chatbot -->
<div class="chatbot" id="chatbot">
  <div class="chat-header">
    SiBoti ü§ñ 
    <button id="toggle-btn" style="background:none; border:none; color:white; font-size:16px; cursor:pointer;">‚àí</button>
  </div>
  <div class="chat-body" id="chat-body"></div>
  <div class="chat-input" id="chat-input">
    <input type="text" id="user-input" placeholder="Escribe un plato o consulta...">
    <button onclick="sendMessage()">Enviar</button>
  </div>
</div>

<script>
  // Mensaje inicial
  window.onload = () => {
    const chatBody = document.getElementById("chat-body");
    chatBody.innerHTML += `
      <p class="bot">
        <strong>SiBoti ü§ñ</strong> ¬°Hola! Soy tu asistente SIBO üçΩÔ∏è<br>
        Pod√©s pedirme:<br>
        - "Mostrame platos apto SIBO"<br>
        - "Qu√© recetas son moderadas"<br>
        - "Sugerir cambio para estofado"<br>
        - "Qu√© platos no recomend√°s"
      </p>`;
  };

  // Enviar mensaje al backend Flask
  async function sendMessage() {
    const input = document.getElementById("user-input");
    const message = input.value.trim();
    const chatBody = document.getElementById("chat-body");
    if (message === "") return;

    chatBody.innerHTML += `<p class="user"><strong>T√∫:</strong> ${message}</p>`;
    input.value = "";
    chatBody.scrollTop = chatBody.scrollHeight;

    try {
      const response = await fetch("/chatbot", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ mensaje: message })
      });

      if (!response.ok) throw new Error("Error en el servidor");
      const data = await response.json();
      chatBody.innerHTML += `<p class="bot"><strong>SiBoti ü§ñ</strong> ${data.respuesta}</p>`;
    } catch (error) {
      chatBody.innerHTML += `<p class="bot"><strong>SiBoti ü§ñ</strong> üòï Hubo un problema al conectar con el servidor.</p>`;
      console.error(error);
    }

    chatBody.scrollTop = chatBody.scrollHeight;
  }

  // Enter para enviar
  document.getElementById("user-input").addEventListener("keypress", function(e) {
    if (e.key === "Enter") sendMessage();
  });

  // Minimizar / expandir chat
  const toggleBtn = document.getElementById("toggle-btn");
  const chatBodyEl = document.getElementById("chat-body");
  const chatInputEl = document.getElementById("chat-input");
  toggleBtn.addEventListener("click", () => {
    if (chatBodyEl.style.display === "none") {
      chatBodyEl.style.display = "flex";
      chatInputEl.style.display = "flex";
      toggleBtn.textContent = "‚àí";
    } else {
      chatBodyEl.style.display = "none";
      chatInputEl.style.display = "none";
      toggleBtn.textContent = "+";
    }
  });
</script>

</body>
</html>
